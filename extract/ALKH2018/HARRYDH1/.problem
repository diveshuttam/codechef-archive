{
    "status": "success",
    "problem_status": "unattempted",
    "problem_tester": null,
    "body": "<span class=\"solution-visible-txt\">All submissions for this problem are available.</span><p>\n<b>\nHermione : [reading] \"There were once three brothers, who were traveling along a lonely winding road at twilight\".</br>\n</b>\n</p>\n\n<p>After taking the prize for their cleverness from the Death, the Eldest brother(X) and the Second brother(Y) realized that the best choice was made by their youngest brother and hence they decided to kill him and take his cloak of invisibility. But there was only one cloak and 2 brothers. So they decided to play <b>Q</b> games to decide who will take the cloak. The game is as follows: </p>\n<p>\nLet <b>M</b> denote a Magical Pair of a number(<b>id</b>) and a string(<b>str</b>). </br>\nFormally, <b>M = (id, str) </b>\n</p>\n<p>\nThere is a set of Magical Pairs which they fix at the very beginning. This set is never changed, even if multiple games are played. More than one Magical Pair can have same <b>id</b>. Let <b>S</b> denote the set of Magical Pairs.</br>\n<b>S = {M<sub>1</sub>, M<sub>2</sub>, ......, M<sub>n</sub>} = {(id<sub>1</sub>,str<sub>1</sub>), (id<sub>2</sub>, str<sub>2</sub>), ........, (id<sub>n</sub>, str<sub>n</sub>)} </b>\n</p>\n<p>\nEach of the <b>Q</b> individual games will be played on an Active Set. An Active Set <b>A</b> is defined as a subset of <b>S</b> on which current game is being played. This Active Set is constructed in a particular way, which will be explained later.\n</p>\n\n<p>\nIn a single game, the two players take alternating turns, making Moves. A Move is defined as selecting a Magical Pair <b>M</b> and all other Magical Pairs <b>P</b>(including <b>M</b>) from the set <b>A</b> such that <b>P<sub>id</sub></b> is equal to <b>M<sub>id</sub></b> and <b>M<sub>str</sub></b> is a prefix of <b>P<sub>str</sub></b>. These are then deleted from the set <b>A</b>. A player who is not able to move loses. The Younger Brother moves first. Both players play optimally.\n</p>\n\n<p>\nLet us now see how the Active Set for each of the <b>Q</b> games is constructed. Each game is described by three integers: <b>L</b>, <b>R</b>, and <b>K</b>, which is known to you. At the start of each game, <b>A</b> is empty, and then the two players do the following to construct <b>A</b>:</p>\n<p>\n<ul>\n<li><b>Second Brother(Y)</b> : In the first step, the second brother adds all Magical Pairs <b>M</b> from set <b>S</b> to the Active set <b>A</b> such that <b>L</b>  \u2264 <b>M<sub>id</sub></b> \u2264 <b>R</b></li>\n<li><b>Elder brother(X)</b> : In the second step, the Elder brother removes all the Magical Pairs <b>M</b> from the Active set <b>A</b> of <b>id Z</b> if there are more than <b>K</b> Magical Pairs with <b>id Z</b>. That is, if there is any id which appears more than <b>K</b> times, he removes them all.</li>\n<li><b>Elder brother(X)</b> : In the last step, the Elder brother chooses any one <b>id</b> which exists in the Active Set currently, and removes all Magic Pairs with that id.</li>\n</ul>\n</p>\n<p>\nThe Elder Brother wants to know, in how many different ways can he do the last step (that is, selecting some id) emerge as the winner of that game. Help him find this for each of the <b>Q</b> games.\n</p>\n\n<h3>Input</h3>\n<ul>\n<li>First line an integer <b>N</b> denoting number of Magical Pairs in set <b>S</b>.</li>\n<li>Next <b>N</b> lines contains a pair of <b>id</b> and <b>str</b> separated by space, denoting <b>N</b> Magical Pairs.</li>\n<li>Next line contains an integer <b>Q</b> denoting Number of games played. </li>\n<li>Next <b>Q</b> lines contains three space separated integers <b>L</b>, <b>R</b>, <b>K</b> as described in the problem.</li>\n</ul>\n</br>\n\n<h3>Output</h3>\n<ul>\n<li>It contains <b>Q</b> lines, each line containing the number of ways for Elder Brother to win as per the above mentioned conditions.</li>\n</ul>\n</br>\n\n<h3>Constraints</h3>\n<ul>\n<li>1 \u2264 <b>N, Q</b> \u2264 2 * 10<sup>5</sup></li>\n<li>1 \u2264 <b>id</b> \u2264 2 * 10<sup>4</sup></li>\n<li>1 \u2264 <b> |str|</b> \u2264 10<sup>5</sup></li>\n<li>1 \u2264 <b>|str<sub>1</sub>|</b> + .... + <b>|str<sub>N</sub>|</b> \u2264 3 * 10<sup>6</sup></li>\n<li>1 \u2264 <b>L</b> \u2264 <b>R</b> \u2264 2 * 10<sup>4</sup></li>\n<li>1 \u2264 <b>K</b> \u2264 10<sup>5</sup></li>\n</ul>\n</br>\n\n<h3>Example 1</h3>\n<pre><b>Input:</b>\n9\n2 nig\n2 my\n2 myhello\n2 night\n4 myth\n2 nil\n4 myhello\n2 myth\n4 my\n4\n1 5 6\n2 4 5\n2 3 5\n3 5 4\n\n<b>Output:</b>\n0\n1\n0\n1\n</pre>\n</br>\n\n<h3>Explanation</h3>\n<p> \nFor given problem, </br>\n<b>S = {(2,nig),(2,my),(2,myhello),(2,night),(2,myth),(2,nil),(4,myhello)(4,myth),(4,my)} </b></br>\n<hr>\n<b>Query 1 </b> : The Active Set, after the first two steps is</br>\n<b>A</b> = <b>S</b>. </br>\nNow Elder Brother(X) can either select <b>id = 2</b> or <b>id = 4</b> for removal.</br></br>\n\n<b>1.</b> Suppose <b>X</b> selects <b>id = 2</b> for removal then the new Active set, </br>\n<b>A = {(4,myhello),(4,myth),(4,my)}.</b> </br>\nAs both player are playing optimally, hence in the first move Second Brother(Y) will remove <b>(4,my)</b> from A further resulting into removal of <b>(4,myhello)</b> and <b>(4,myth)</b> since these Magical pairs have same <b>id</b> as of <b>my</b> and <b>my</b> is prefix of both <b>myhello</b> and <b>myth</b>. <b>A</b> is empty now. So Elder Brother can't move and hence Loses.\n</br></br>\n\n<b>2.</b> Suppose <b>X</b> selects <b>id = 4</b> for removal then the new Active set, </br>\n<b>A = {(2,nig),(2,my)(2,myhello),(2,night),(2,myth),(2,nil)}.</b> </br>\nOne of the optimal set of moves on given set <b>A</b> is :</br>\nY : removes (2,nig) and {(2,night)} also gets removed</br>\nX : removes (2,myth)</br>\nY : remves (2,myhello)</br>\nX : removes (2,nil)</br>\nY : removes (2,my)</br>\nNo more Magical Pairs are left to remove. So Elder Brother loses the game. </br>\nHence there exists <b>no way</b> to remove exactly <b>1 id</b> and emerge as winner.</br>\n<hr>\n<b>Query 2</b> : The Active Set, after first two steps is</br>\n<b>A = {(4,myhello),(4,myth),(4,my)}. </b></br>\nElder brother can select <b>id = 4</b> and make set <b>A</b> empty.</br>\nNow Younger Brother cannot move and hence Elder one is the winner.</br>\nSo in total <b>1</b> way exists.</br>\n<hr>\n<b>Query 3</b> : The Active Set, after first two steps is </br>\n<b>A = {}.</b></br>\nHence Elder brother cannot select any id. </br>\nSo in total <b>0</b> way exists.</br>\n<hr>\n<b>Query 4</b> : The Active Set, after first two steps is</br>\n<b>A = {(2,nig),(2,my)(2,myhello),(2,night),(2,myth),(2,nil)}.</b> </br>\nElder brother can select <b>id = 2</b> and make set <b>A</b> empty.</br>\nNow Younger Brother cannot move and hence Elder one is the winner.</br>\nSo in total <b>1</b> way exists.</br>\n</p>\n",
    "category_name": "main",
    "user": {
        "username": ""
    },
    "date_added": "8-03-2018",
    "is_direct_submittable": false,
    "contest_name": "ALKHWARIZM (Rated)",
    "languages_supported": "C, CPP14, JAVA, PYTH, PYTH 3.6, PYPY, CS2, PAS fpc, PAS gpc, RUBY, PHP, GO, NODEJS, HASK, rust, SCALA, swift, D, PERL, FORT, WSPC, ADA, CAML, ICK, BF, ASM, CLPS, PRLG, ICON, SCM qobi, PIKE, ST, NICE, LUA, BASH, NEM, LISP sbcl, LISP clisp, SCM guile, JS, ERL, TCL, kotlin, PERL6, TEXT, SCM chicken, CLOJ, COB, FS",
    "todo": false,
    "time": {
        "view_start_date": 1521214200,
        "end_date": 1521232200,
        "practice_submission_allowed": true,
        "visible_start_date": 1521232200,
        "submit_start_date": 1521214200,
        "current": 1537432819
    },
    "problem_author_html_handle": "<span \n            class='rating' \n            style='display: inline-block; \n                    font-size: 10px; \n                    background: #FF7F00;\n                    padding: 0 3px; \n                    line-height: 1.3; \n                    color: white;\n                    margin-right: 2px;'>6&#9733;</span><span>priyanshukm</span>",
    "problem_name": "Deathly Hallows and The Cloak Of Invisibility",
    "source_sizelimit": "50000",
    "tags": "<a class='problem-tag-small ' href='/tags/problems/priyanshukm'>priyanshukm</a>",
    "problem_tester_html_handle": "",
    "problem_author": "priyanshukm",
    "contest_code": "ALKH2018",
    "max_timelimit": "2",
    "problem_code": "HARRYDH1"
}